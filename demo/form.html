<!DOCTYPE html>
<html>
<head>
    <title>simpe page</title>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
    <link href="../bower_components/tinyui/dist/css/bootstrap.css" rel="stylesheet" />
    <link href="../bower_components/tinyui/dist/css/tiny.css" rel="stylesheet" />
    <link href="../bower_components/smalot-bootstrap-datetimepicker/css/bootstrap-datetimepicker.css" rel="stylesheet" />
</head>

<body style="max-width:800px;">
    <div class="p15" data-ver-role="hello-veronica-ui">
        <form class="form-horizontal" method="post" role="form" data-ignore="">
            <div>

                <!-- Nav tabs -->
                <ul class="nav nav-tabs" role="tablist">
                    <li role="presentation" class="active"><a href="#home" aria-controls="home" role="tab" data-toggle="tab">Home</a></li>
                    <li role="presentation"><a href="#profile" aria-controls="profile" role="tab" data-toggle="tab">Profile</a></li>
                    <li role="presentation"><a href="#messages" aria-controls="messages" role="tab" data-toggle="tab">Messages</a></li>
                    <li role="presentation"><a href="#settings" aria-controls="settings" role="tab" data-toggle="tab">Settings</a></li>
                </ul>

                <!-- Tab panes -->
                <div class="tab-content">
                    <div role="tabpanel" class="tab-pane active" id="home">
                        <div class="form-group">
                            <label class="col-md-2 control-label" for="Email">电子邮件</label>
                            <div class="col-md-10">
                                <div class="input-group">
                                    <span class="input-group-addon">@</span>
                                    <input class="form-control" data-val="true" data-val-email="电子邮件 字段不是有效的电子邮件地址。" data-val-required="电子邮件 字段是必需的。" id="Email" name="Email" type="text" value="" />
                                </div>
                                <span class="field-validation-valid text-danger" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                            </div>
                        </div>

                    </div>
                    <div role="tabpanel" class="tab-pane" id="profile">
                        <div class="form-group">
                            <label class="col-md-2 control-label" for="Password">密码</label>
                            <div class="col-md-10">
                                <input class="form-control" data-val="true" data-val-required="密码 字段是必需的。" id="Password" name="Password" type="text" />
                                <span class="field-validation-valid text-danger" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                            </div>
                        </div>
                    </div>
                    <div role="tabpanel" class="tab-pane" id="messages">...</div>
                    <div role="tabpanel" class="tab-pane" id="settings">...</div>
                </div>

            </div>
            <input type="submit" value="登录" class="btn btn-default" data-action="valid" />
        </form>
        <form class="form-horizontal" method="post" role="form">
            <div class="form-group">
                <label class="col-md-2 control-label" for="Email">电子邮件</label>
                <div class="col-md-10">
                    <div class="input-group">
                        <span class="input-group-addon">@</span>
                        <input class="form-control" data-val="true" data-val-email="电子邮件 字段不是有效的电子邮件地址。" data-val-required="电子邮件 字段是必需的。" id="Email" name="Email" type="text" style="border:0;height:1px;padding:0;" value="" />
                    </div>
                    <span class="field-validation-valid text-danger" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label" for="Password">密码</label>
                <div class="col-md-10">
                    <input class="form-control" data-val="true" data-val-required="密码 字段是必需的。" id="Password" name="Password" type="hidden" />
                    <span class="field-validation-valid text-danger" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </div>
            </div>
            <div class="form-group">
                <label class="col-xs-2 control-label">日期</label>
                <div class="col-xs-10">
                    <input class="form-control date" data-val="true" data-val-required="日期字段是必需的。" id="date" name="date" type="text" />
                    <span class="field-validation-valid text-danger" data-valmsg-for="date" data-valmsg-replace="true"></span>
                </div>
            </div>
            <div class="form-group">
                <label class="col-xs-2 control-label">日期时间</label>
                <div class="col-xs-10">
                    <input class="form-control datetime" data-val="true" data-val-required="该字段是必须的" id="date" name="datetime" type="text" />
                    <span class="field-validation-valid text-danger" data-valmsg-for="date" data-valmsg-replace="true"></span>
                </div>
            </div>
            <div class="form-group">
                <label class="col-xs-2 control-label">时间</label>
                <div class="col-xs-10">
                    <input class="form-control time" data-val="true" data-val-required="该字段是必须的" id="date" name="time" type="text" />
                    <span class="field-validation-valid text-danger" data-valmsg-for="date" data-valmsg-replace="true"></span>
                </div>
            </div>
            <div class="form-group">
                <label class="col-xs-2 control-label">自动完成</label>
                <div class="col-xs-10">
                    <input class="typeahead form-control" type="text" placeholder="States of USA">
                </div>
            </div>
            <div class="form-group">
                <div class="col-md-offset-2 col-md-10">
                    <div class="checkbox">
                        <label for="RememberMe">
                            <input data-val="true" required data-val-required="记住我? 字段是必需的。"
                                   id="RememberMe" name="RememberMe" type="checkbox" value="true" />
                            记住我?
                        </label>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <div class="col-md-offset-2 col-md-10">
                    <input type="submit" value="登录" class="btn btn-default" />
                </div>
            </div>
        </form>

        <form class="form-horizontal">
            <div class="form-group">
                <label class="col-sm-2 control-label">Email</label>
                <div class="col-sm-10">
                    <p class="form-control-static">email@example.com</p>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label">Email</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" name="email" data-inputmask="'alias': 'email'" data-bind="value: email">
                </div>
            </div>
            <div class="form-group">
                <label for="inputPassword" class="col-sm-2 control-label">Password</label>
                <div class="col-sm-10">
                    <input type="password" class="form-control" name="password" placeholder="Password">
                </div>
            </div>
            <div class="form-group">
                <label for="inputPassword" class="col-sm-2 control-label">Date</label>
                <div class="col-sm-10">
                    <input type="text" readonly class="form-control" name="date" id="datetimepicker" placeholder="Date">
                </div>
            </div>
            <div class="form-group">
                <table class="table" data-form-list="table">
                    <caption>Optional table caption.</caption>
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>First Name</th>
                            <th>Last Name</th>
                            <th>Username</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <th scope="row">1</th>
                            <td>Mark</td>
                            <td>Otto</td>
                            <td>@mdo</td>
                        </tr>
                        <tr>
                            <th scope="row">2</th>
                            <td>Jacob</td>
                            <td>Thornton</td>
                            <td>@fat</td>
                        </tr>
                        <tr>
                            <th scope="row">3</th>
                            <td>Larry</td>
                            <td>the Bird</td>
                            <td>@twitter</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="form-group">
                <button class="btn btn-default" data-action="test">测试 Notify</button>
                <button type="submit" class="btn btn-default" data-action="fetch">获取数据（通过表单方法）</button>
                <input type="checkbox" data-action="fetchvm" class="btn btn-default">获取数据（通过视图模型）</input>
            </div>
            <hr />
        </form>
    </div>
    <hr />


    <script src="../bower_components/jquery/dist/jquery.min.js"></script>
    <script src="../bower_components/underscore/underscore-min.js"></script>
    <script src="../bower_components/veronica/dist/veronica.js"></script>
    <script src="../dist/veronica-ui.js"></script>

    <script>
        // 创建 app
        var app = veronica.createApp({
            extensions: [window.veronicaui]
        });

        var baseActiveUI = app.view.base._activeUI;
        app.view.base._activeUI = function () {
            baseActiveUI.call(this);

            //  datetimepicker
            this.$('input.date').datetimepicker({
                language: 'zh-CN',
                startView: 'month',
                minView: 2,
                autoclose: true,
                format: 'yyyy-mm-dd'
            });
            this.$('input.datetime').datetimepicker({
                locale: 'zh-CN',
                format: 'YYYY-MM-DD HH:mm:ss',
                keepOpen: true,
                dayViewHeaderFormat: 'YYYY MMMM'
            });
            this.$('input.time').datetimepicker({
                locale: 'zh-CN',
                format: 'HH:mm:ss',
                keepOpen: true,
                dayViewHeaderFormat: 'YYYY MMMM'
            });

            // placeholder
            this.$('[placeholder]').placeholder();

            // inputmask
            app.formUtil.enableInputMask(this.$el);
        }
        //$.validator.setDefaults({
        //    ignore: []
        //});

        var i = 0;
        app.widget.register('hello-veronica-ui', function (options) {
            var app = options.sandbox.app;
            var View = app.view.define({
                defaults: {
                    autoAction: true
                },
                initAttr: function () {
                    this.model({}, false);
                },
                rendered: function () {

                    var me = this;
                    this.$('[data-toggle="tab"]').on('show.bs.tab', function (e) {
                        var ele = $($(e.target).attr('href')).find('input.form-control');
                       // ele.tooltip('hide');
                 
                    }).on('shown.bs.tab', function (e) {
                        //var ele = $($(e.target).attr('href')).find('input.form-control');
                        ////ele.tooltip('hide');
                        //_.defer(function () {
                        //    ele.tooltip('enter');
                        //})
                        me.$('form').valid();
                    })
                },
                testHandler: function (e) {
                    e.preventDefault();
                    app.notify.warn('HAHA!!' + (i++));
                    app.notify.confirm("hhehhhh");
                    this.htmlWindow('hahahha');
                },
                fetchHandler: function () {
                    alert(JSON.stringify(app.formUtil.toJSON(this.$el)));
                },
                fetchvmHandler: function (e) {
                    var $target = $(e.currentTarget);
                    if ($target.is('a, [type=submit], button, [type=button]')) {
                        e.preventDefault();
                        alert('haha');
                    }
                    alert(JSON.stringify(this.model().toJSON()));
                },
                validHandler: function (e) {
                    
                    $(e.currentTarget).closest('form').valid();
                }
            });
            var view = new View(options);
            view.show();
            return view;
        });
        app.launch().done(function () {
            // 解析界面
            app.parser.parse();
        });


    </script>
</body>

</html>
